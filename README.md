# LiveStreamExtractor 使用文档

## 项目简介

LiveStreamExtractor 是一款浏览器扩展，用于提取热门直播平台（抖音、哔哩哔哩）的直播流链接，方便用户进行实时录制或其他用途。

## 技术栈

- 前端：HTML5 + CSS3 + JavaScript
- 浏览器扩展技术：Chrome Extension Manifest V3

## 功能特性

### 1. 多平台支持
- 抖音直播流提取
- 哔哩哔哩直播流提取

### 2. 智能提取
- 采用多种提取策略，确保高成功率
- 支持不同清晰度、格式的直播流提取
- 自动分类和识别直播流类型

### 3. 强大的筛选功能
- 按类型筛选（视频/音频）
- 按清晰度筛选（标清、高清、超清、蓝光、原画等）
- 按格式筛选（FLV、HLS等）
- 按链接状态筛选（有效、无效）

### 4. 实用工具
- 单个链接复制功能
- 一键复制所有链接
- 链接有效性测试
- 批量测试所有链接
- 实时状态反馈

### 5. 友好的用户界面
- 响应式设计，适配不同屏幕尺寸
- 清晰的标签页布局，便于平台切换
- 直观的表格展示，信息一目了然
- 流畅的动画效果，提升用户体验

## 安装方法

1. 克隆或下载项目到本地
2. 打开 Chrome 浏览器，进入 `chrome://extensions/`
3. 开启右上角的「开发者模式」
4. 点击「加载已解压的扩展程序」
5. 选择项目文件夹，点击「选择文件夹」
6. 扩展安装成功，会显示在浏览器工具栏中

## 使用指南

### 基本使用流程

1. **打开直播页面**
   - 在浏览器中访问抖音或哔哩哔哩的直播页面

2. **打开扩展侧边栏**
   - 点击浏览器工具栏中的扩展图标
   - 或使用快捷键：
     - Windows/Linux: `Ctrl+Shift+A`
     - Mac: `MacCtrl+Shift+A`

3. **选择平台**
   - 在侧边栏顶部点击相应平台的标签页（抖音/哔哩哔哩）
   - 扩展会自动刷新当前页面并提取直播流

4. **查看直播流列表**
   - 提取成功后，直播流链接会显示在表格中
   - 表格包含：类型、清晰度、格式、状态等信息

### 高级功能

#### 筛选直播流
1. 在平台标签页下方的筛选区域
2. 选择相应的筛选条件：
   - 类型：选择视频或音频
   - 清晰度：选择标清、高清、超清等
   - 格式：选择FLV、HLS等
   - 状态：选择有效或无效
3. 筛选结果会实时更新到表格中

#### 测试直播流链接
1. **单个链接测试**：
   - 在表格中找到目标链接
   - 点击「测试连接」按钮
   - 链接状态会显示为绿色（有效）或红色（无效）

2. **批量测试**：
   - 点击标签页下方的「一键测试」按钮
   - 系统会自动测试所有直播流链接
   - 测试结果会实时更新到表格中

#### 复制直播流链接
1. **单个链接复制**：
   - 在表格中找到目标链接
   - 点击「复制链接」按钮
   - 链接会复制到剪贴板

2. **一键复制所有链接**：
   - 点击标签页下方的「一键复制」按钮
   - 所有直播流链接会以换行分隔的形式复制到剪贴板

#### 刷新数据
- 点击页面顶部的「刷新数据」按钮
- 系统会重新提取当前页面的直播流链接


## 核心功能详解

### 直播流提取策略

#### 抖音提取策略
1. 从 `window.__RENDER_DATA__` 中提取
2. 从 `data-config` 属性中提取
3. 从 `window.__INITIAL_STATE__` 中提取
4. 从 `self.__pace_f.push` 中提取
5. 直接提取页面中的 FLV、HLS、m3u8 链接

#### 哔哩哔哩提取策略
1. 从页面中直接提取 `playurl_info` 数据
2. 从 `window.__INITIAL_STATE__` 中提取
3. 直接提取页面中的 FLV、HLS、TS 链接

### 清晰度识别规则

| 标识 | 清晰度 |
|------|--------|
| ld   | 标清   |
| sd   | 高清   |
| hd   | 超清   |
| uhd  | 蓝光   |
| or4  | 原画   |

### 格式识别规则

| 扩展名 | 格式 |
|--------|------|
| .flv   | FLV  |
| .m3u8  | HLS  |
| .hls   | HLS  |
| .ts    | TS   |

## 使用注意事项

1. **页面刷新**：打开扩展时会自动刷新当前页面，以确保能提取到最新的直播流数据
2. **提取时间**：提取过程可能需要几秒钟，请耐心等待
3. **链接时效性**：直播流链接具有时效性，过期后需要重新提取
4. **权限要求**：扩展需要访问当前页面的权限才能提取直播流
5. **平台限制**：部分平台可能会更新加密算法，导致提取失败

## 常见问题

### Q: 为什么提取不到直播流？
A: 请检查以下几点：
- 确认当前页面是直播页面(https://live.douyin.com/*,https://live.bilibili.com/*)
- 尝试点击「刷新数据」按钮重新提取
- 检查浏览器控制台是否有错误信息

### Q: 为什么复制的链接无法播放？
A: 可能的原因：
- 链接已过期，需要重新提取
- 链接需要特定的播放器支持
- 平台可能对链接进行了加密处理

### Q: 如何更新扩展？
A: 在 `chrome://extensions/` 页面，点击「更新」按钮或重新加载扩展


---

**注意**：本扩展仅用于学习和研究目的，请遵守相关平台的服务条款，不要滥用本工具。